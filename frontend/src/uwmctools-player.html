<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-tooltip/paper-tooltip.html">

<link rel="import" href="firebase-indexeddb-link.html">

<dom-module id="uwmctools-player">
  <template>
    <style>
      :host {
        display: inline;
      }
      
      a {
        text-decoration: none;
      }
    </style>
    <firebase-indexeddb-link path="uwmctools/players/data/[[uuid]]/name" data="{{name}}"></firebase-indexeddb-link>

    <template is="dom-if" if="[[_isEmpty(name)]]">
        <span>[[uuid]]</span>
    </template>
    <template is="dom-if" if="[[!_isEmpty(name)]]">
      <a href="/player/[[name]]/overview">
        <span>[[name]]</span>
        <paper-tooltip>[[uuid]]</paper-tooltip>
      </a>
    </template>
  </template>

  <script>
    Polymer({
      is: 'uwmctools-player',
      properties: {
        uuid: {
          type: String,
          value: "" 
        },
        name: {
            type: String,
            value: "",
            notify: true,
        }
      },
      _isEmpty(obj){
        return !(obj && Object.keys(obj).length);
      }
    });
  </script>
</dom-module>
